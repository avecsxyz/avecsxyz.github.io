"use strict";(self["webpackChunkave_admin_h5"]=self["webpackChunkave_admin_h5"]||[]).push([[625],{4625:function(e,o,r){r.r(o),r.d(o,{default:function(){return h}});var s=r(3396),a=r(7139);const t=e=>((0,s.dD)("data-v-3ed821c4"),e=e(),(0,s.Cn)(),e),l={class:"login-container"},n=t((()=>(0,s._)("span",{class:"title"},"AVE后台管理系统",-1))),u={style:{margin:"16px"}};function m(e,o,r,t,m,i){const d=(0,s.up)("van-field"),c=(0,s.up)("van-cell-group"),p=(0,s.up)("van-button"),f=(0,s.up)("van-form");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s.Uk)((0,a.zw)(e.$store.state.authToken)+" ",1),(0,s.Wm)(f,{ref:"form",onSubmit:i.login,rules:m.rules},{default:(0,s.w5)((()=>[n,(0,s.Wm)(c,{inset:""},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{modelValue:m.form.user_name,"onUpdate:modelValue":o[0]||(o[0]=e=>m.form.user_name=e),modelModifiers:{trim:!0},name:"用户名",label:"用户名",autocomplete:"on",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),(0,s.Wm)(d,{modelValue:m.form.password,"onUpdate:modelValue":o[1]||(o[1]=e=>m.form.password=e),modelModifiers:{trim:!0},type:"password",name:"密码",label:"密码",autocomplete:"on",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])])),_:1}),(0,s._)("div",u,[(0,s.Wm)(p,{round:"",size:"small",block:"",type:"primary","native-type":"submit"},{default:(0,s.w5)((()=>[(0,s.Uk)("登录")])),_:1})])])),_:1},8,["onSubmit","rules"])])}r(7658);var i=r(6739),d=r(4239),c={name:"Login",beforeRouteEnter(e,o,r){d.Z.state.authToken?r("/"):r()},data(){return{form:{user_name:localStorage?.user_name||"",password:localStorage?.password||""},rules:{user_name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},loading:!1}},methods:{login(){this.loading=!0,(0,i.x4)(this.form).then((e=>{e&&(localStorage.user_name=this.form.user_name,localStorage.password=this.form.password,this.$notify({type:"success",message:"登录成功"}),this.$store.commit("setToken",e?.token),this.$store.commit("setUserInfo",{user_name:e.user_name,role:e.role||1}),e?.token&&(3===e.role?this.$router.push("/check"):-1===e.role?this.$router.push("/token/logo"):this.$router.push("/")))})).catch((e=>{console.log(e),this.$notify({type:"danger",message:e})})).finally((()=>{this.loading=!1}))}}},p=r(89);const f=(0,p.Z)(c,[["render",m],["__scopeId","data-v-3ed821c4"]]);var h=f}}]);
//# sourceMappingURL=625.216cd97f.js.map